// RUN: rm -rf %t && mkdir -p %t
// RUN: printf 'module top(input a, output y); assign y = a; endmodule\n' > %t/design.v
// RUN: printf '#!/usr/bin/env bash\nset -euo pipefail\ntouch %t/yosys-invoked\nscript=\"${@: -1}\"\nout=$(sed -n "s/.*-o \\\"\\([^\\\"]*\\)\\\".*/\\1/p" "$script" | tail -n1)\necho \"1 MUT\" > \"$out\"\n' > %t/fake-yosys.sh
// RUN: chmod +x %t/fake-yosys.sh
// RUN: not circt-mut generate --design %t/design.v --out %t/mutations.txt --count 5 --mode bogus --yosys %t/fake-yosys.sh 2> %t/log1.txt
// RUN: FileCheck %s --check-prefix=MODE < %t/log1.txt
// RUN: not circt-mut generate --design %t/design.v --out %t/mutations.txt --count 5 --mode-count bogus=5 --yosys %t/fake-yosys.sh 2> %t/log2.txt
// RUN: FileCheck %s --check-prefix=COUNT < %t/log2.txt
// RUN: test ! -e %t/yosys-invoked
//
// MODE: circt-mut generate: unknown --mode value: bogus (expected inv|const0|const1|cnot0|cnot1|arith|control|balanced|all|stuck|invert|connect)
// COUNT: circt-mut generate: unknown --mode-count mode: bogus (expected inv|const0|const1|cnot0|cnot1|arith|control|balanced|all|stuck|invert|connect)
