// RUN: rm -rf %t/sv-tests
// RUN: mkdir -p %t/sv-tests/tests %t/bin
// RUN: printf '/*\n:tags: uvm\n:type: simulation\n:top_module: top\n*/\nmodule top(input logic clk_a, input logic clk_b, input logic a, input logic b);\n  assert property (@(posedge clk_a) a);\n  assert property (@(posedge clk_b) b);\nendmodule\n' > %t/sv-tests/tests/multiclock_stdout_case.sv
// RUN: printf '#!/usr/bin/env bash\nset -euo pipefail\ncat <<\"MLIR\"\nmodule {\n  hw.module @top(in %clk_a : i1, in %clk_b : i1, in %a : i1, in %b : i1) {\n    %c1 = hw.constant true\n    verif.assert %c1 : i1\n    hw.output\n  }\n}\nMLIR\n' > %t/bin/circt-verilog
// RUN: chmod +x %t/bin/circt-verilog
// RUN: printf '#!/usr/bin/env bash\nset -euo pipefail\nallow=0\nmlir=\"\"\nfor a in \"$@\"; do\n  [[ \"$a\" == \"--allow-multi-clock\" ]] && allow=1\n  mlir=\"$a\"\ndone\nif grep -q \"clk_b\" \"$mlir\"; then\n  if [[ \"$allow\" != \"1\" ]]; then\n    echo \"$mlir:1:1: error: modules with multiple clocks not yet supported\"\n    exit 1\n  fi\nfi\necho \"BMC_RESULT=UNSAT\"\nexit 0\n' > %t/bin/circt-bmc
// RUN: chmod +x %t/bin/circt-bmc
// RUN: env CIRCT_VERILOG=%t/bin/circt-verilog CIRCT_BMC=%t/bin/circt-bmc Z3_LIB=/dev/null BMC_SMOKE_ONLY=0 TEST_FILTER='multiclock_stdout_case' OUT=%t/results.tsv %S/../../utils/run_sv_tests_circt_bmc.sh %t/sv-tests | FileCheck %s
// RUN: FileCheck %s --check-prefix=RESULTS < %t/results.tsv
//
// CHECK: sv-tests SVA summary: total=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 unknown=0 timeout=0
// RESULTS: PASS{{[[:space:]]+}}multiclock_stdout_case{{[[:space:]]+}}
