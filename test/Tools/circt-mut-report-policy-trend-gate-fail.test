// RUN: rm -rf %t && mkdir -p %t/proj/out/cover
// RUN: printf 'total_mutants\t10\nrelevant_mutants\t5\ndetected_mutants\t1\npropagated_not_detected_mutants\t4\nnot_propagated_mutants\t2\nnot_activated_mutants\t3\nerrors\t0\nmutation_coverage_percent\t20.00\nglobal_filter_timeout_mutants\t1\nglobal_filter_lec_unknown_mutants\t1\nglobal_filter_bmc_unknown_mutants\t1\n' > %t/proj/out/cover/metrics.tsv
// RUN: printf 'run_id\ttimestamp_utc\tkey\tvalue\n1\t2026-02-10T00:00:00Z\tcover.detected_mutants\t2\n1\t2026-02-10T00:00:00Z\tcover.global_filter_timeout_mutants\t0\n1\t2026-02-10T00:00:00Z\tcover.global_filter_lec_unknown_mutants\t0\n1\t2026-02-10T00:00:00Z\tcover.global_filter_bmc_unknown_mutants\t0\n2\t2026-02-10T01:00:00Z\tcover.detected_mutants\t2\n2\t2026-02-10T01:00:00Z\tcover.global_filter_timeout_mutants\t0\n2\t2026-02-10T01:00:00Z\tcover.global_filter_lec_unknown_mutants\t0\n2\t2026-02-10T01:00:00Z\tcover.global_filter_bmc_unknown_mutants\t0\n' > %t/proj/history.tsv
// RUN: not circt-mut report --project-dir %t/proj --mode cover --trend-history history.tsv --policy-profile formal-regression-trend 2>&1 | FileCheck %s
//
// CHECK-DAG: policy.profile_count{{[[:space:]]}}1
// CHECK-DAG: policy.profile_1{{[[:space:]]}}formal-regression-trend
// CHECK-DAG: trend.gate_rules_total{{[[:space:]]}}4
// CHECK-DAG: trend.gate_failure_count{{[[:space:]]}}4
// CHECK-DAG: trend.gate_status{{[[:space:]]}}fail
