// RUN: rm -rf %t
// RUN: mkdir -p %t/bin %t/ot %t/work
// RUN: printf 'target_name\tfusesoc_core\ttask\tflow\tsub_flow\trel_path\tsource_kind\tsource_cfg_file\troot_cfg_file\nbaz_fpv\tlowrisc:fpv:baz_fpv\tFpvDefault\tformal\tfpv\thw/top_earlgrey/formal/ip/baz\tinline\t%t/top.hjson\t%t/top.hjson\n' > %t/manifest.tsv
// RUN: printf '#!/usr/bin/env bash\nexit 3\n' > %t/bin/fusesoc
// RUN: chmod +x %t/bin/fusesoc
// RUN: not python3 %S/../../utils/resolve_opentitan_formal_compile_contracts.py --manifest %t/manifest.tsv --opentitan-root %t/ot --out-contracts %t/contracts.tsv --workdir %t/work --fusesoc-bin %t/bin/fusesoc 2>&1 | FileCheck %s --check-prefix=ERR
// RUN: FileCheck %s --check-prefix=ROW < %t/contracts.tsv
//
// ERR: status=error
// ROW: baz_fpv{{[[:space:]]+}}lowrisc:fpv:baz_fpv{{[[:space:]]+}}FpvDefault{{[[:space:]]+}}formal{{[[:space:]]+}}fpv{{[[:space:]]+}}hw/top_earlgrey/formal/ip/baz{{[[:space:]]+}}error{{[[:space:]]+}}0{{[[:space:]]+}}0{{[[:space:]]+}}0
