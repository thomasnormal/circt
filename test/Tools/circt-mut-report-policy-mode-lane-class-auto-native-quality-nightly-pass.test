// RUN: rm -rf %t && mkdir -p %t/proj/out/matrix/lane1 %t/formal-out
// RUN: printf 'total_mutants\t6\nrelevant_mutants\t6\ndetected_mutants\t2\npropagated_not_detected_mutants\t2\nnot_propagated_mutants\t1\nnot_activated_mutants\t1\nerrors\t0\nglobal_filter_timeout_mutants\t0\nglobal_filter_lec_unknown_mutants\t0\nglobal_filter_bmc_unknown_mutants\t0\n' > %t/proj/out/matrix/lane1/metrics.tsv
// RUN: printf 'lane_id\tstatus\texit_code\tcoverage_percent\truntime_ns\tgate_status\tlane_dir\tmetrics_file\tsummary_json\tgenerated_mutations_cache_status\tgenerated_mutations_cache_hit\tgenerated_mutations_cache_miss\tgenerated_mutations_cache_saved_runtime_ns\tgenerated_mutations_cache_lock_wait_ns\tgenerated_mutations_cache_lock_contended\tconfig_error_code\tconfig_error_reason\tprequalify_summary_present\tprequalify_pair_file\tprequalify_log_file\tprequalify_total_mutants\tprequalify_not_propagated_mutants\tprequalify_propagated_mutants\tprequalify_create_mutated_error_mutants\tprequalify_probe_error_mutants\tprequalify_cmd_token_not_propagated_mutants\tprequalify_cmd_token_propagated_mutants\tprequalify_cmd_rc_not_propagated_mutants\tprequalify_cmd_rc_propagated_mutants\tprequalify_cmd_timeout_propagated_mutants\tprequalify_cmd_error_mutants\nlane1\tPASS\t0\t33.33\t1000\tPASS\t%t/proj/out/matrix/lane1\t%t/proj/out/matrix/lane1/metrics.tsv\t-\tdisabled\t0\t0\t0\t0\t0\t-\t-\t1\t%t/proj/out/matrix/prequalify_pair.tsv\t%t/proj/out/matrix/prequalify.log\t6\t2\t4\t0\t0\t0\t0\t0\t0\t0\t0\n' > %t/proj/out/matrix/results.tsv
// RUN: printf 'lane_id\tpair_file\tlog_file\thas_summary\tprequalify_total_mutants\tprequalify_not_propagated_mutants\tprequalify_propagated_mutants\tprequalify_create_mutated_error_mutants\tprequalify_probe_error_mutants\tprequalify_cmd_token_not_propagated_mutants\tprequalify_cmd_token_propagated_mutants\tprequalify_cmd_rc_not_propagated_mutants\tprequalify_cmd_rc_propagated_mutants\tprequalify_cmd_timeout_propagated_mutants\tprequalify_cmd_error_mutants\nlane1\t%t/proj/out/matrix/prequalify_pair.tsv\t%t/proj/out/matrix/prequalify.log\t1\t6\t2\t4\t0\t0\t0\t0\t0\t0\t0\t0\n' > %t/proj/out/matrix/native_matrix_prequalify_summary.tsv
// RUN: bash -lc 'row="lane1\t%t/proj/design.il\t%t/proj/mutations.txt\t%t/proj/tests.tsv\t-\t-\t-"; for _ in $(seq 1 39); do row="${row}\t-"; done; row="${row}\tnative-quality-nightly"; printf "%b\n" "$row" > %t/proj/lanes.tsv'
// RUN: printf '[matrix]\nlanes_tsv = "lanes.tsv"\nout_dir = "out/matrix"\n' > %t/proj/circt-mut.toml
// RUN: printf 'suite\tmode\ttotal\tpass\tfail\txfail\txpass\terror\tskip\tsummary\nsv-tests\tBMC\t1\t1\t0\t0\t0\t0\t0\ttotal=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 bmc_timeout_stage_frontend_cases=0 bmc_timeout_stage_solver_cases=0 bmc_timeout_stage_unknown_cases=0 bmc_semantic_bucket_fail_like_cases=0\nsv-tests-uvm\tBMC_SEMANTICS\t1\t1\t0\t0\t0\t0\t0\ttotal=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 bmc_timeout_stage_frontend_cases=0 bmc_timeout_stage_solver_cases=0 bmc_timeout_stage_unknown_cases=0 bmc_semantic_bucket_fail_like_cases=0\nverilator-verification\tBMC\t1\t1\t0\t0\t0\t0\t0\ttotal=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 bmc_timeout_stage_frontend_cases=0 bmc_timeout_stage_solver_cases=0 bmc_timeout_stage_unknown_cases=0 bmc_semantic_bucket_fail_like_cases=0\nyosys/tests/sva\tBMC\t1\t1\t0\t0\t0\t0\t0\ttotal=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 bmc_timeout_stage_frontend_cases=0 bmc_timeout_stage_solver_cases=0 bmc_timeout_stage_unknown_cases=0 bmc_semantic_bucket_fail_like_cases=0\nsv-tests\tLEC\t1\t1\t0\t0\t0\t0\t0\ttotal=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 lec_timeout_stage_frontend_cases=0 lec_timeout_stage_solver_cases=0 lec_timeout_stage_unknown_cases=0\nverilator-verification\tLEC\t1\t1\t0\t0\t0\t0\t0\ttotal=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 lec_timeout_stage_frontend_cases=0 lec_timeout_stage_solver_cases=0 lec_timeout_stage_unknown_cases=0 lec_error_bucket_semantic_diag_parser_cases=0 lec_error_bucket_semantic_diag_lowering_cases=0 lec_error_bucket_semantic_diag_solver_cases=0\nyosys/tests/sva\tLEC\t1\t1\t0\t0\t0\t0\t0\ttotal=1 pass=1 fail=0 xfail=0 xpass=0 error=0 skip=0 lec_timeout_stage_frontend_cases=0 lec_timeout_stage_solver_cases=0 lec_timeout_stage_unknown_cases=0 lec_error_bucket_semantic_diag_parser_cases=0 lec_error_bucket_semantic_diag_lowering_cases=0 lec_error_bucket_semantic_diag_solver_cases=0\n' > %t/formal-out/summary.tsv
// RUN: circt-mut report --project-dir %t/proj --mode matrix --external-formal-out-dir %t/formal-out > %t/out.txt
// RUN: FileCheck %s < %t/out.txt
//
// CHECK: policy.mode{{[[:space:]]}}native-strict-formal-quality-nightly
// CHECK: policy.mode_is_native_strict{{[[:space:]]}}1
// CHECK: policy.mode_source{{[[:space:]]}}lane_class_auto
// CHECK: policy.profile_count{{[[:space:]]}}7
// CHECK: value_gate.failure_count{{[[:space:]]}}0
// CHECK: value_gate.status{{[[:space:]]}}pass
