// RUN: rm -rf %t && mkdir -p %t
// RUN: printf 'module top(input a, output y); assign y = a; endmodule\n' > %t/design.v
// RUN: printf '#!/usr/bin/env bash\nset -euo pipefail\nscript=\"${@: -1}\"\nwhile IFS= read -r line; do\n  grep -q -- \"-cfg weight_cover 5\" <<< \"$line\"\n  grep -q -- \"-cfg pick_cover_prcnt 80\" <<< \"$line\"\n  out=$(sed -n \"s/.*-o \\\"\\([^\\\"]*\\)\\\".*/\\1/p\" <<< \"$line\")\n  mode=$(sed -n \"s/.*-mode \\([^ ]*\\).*/\\1/p\" <<< \"$line\")\n  count=$(sed -n \"s/.*mutate -list \\([0-9][0-9]*\\).*/\\1/p\" <<< \"$line\")\n  : > \"$out\"\n  for ((i=1; i<=count; ++i)); do\n    echo \"$i M_${mode}_$i\" >> \"$out\"\n  done\ndone < <(grep \"^mutate -list \" \"$script\")\n' > %t/fake-yosys.sh
// RUN: chmod +x %t/fake-yosys.sh
//
// RUN: %S/../../utils/generate_mutations_yosys.sh --design %t/design.v --out %t/mutations.txt --count 6 --seed 0 --profiles fault-basic --yosys %t/fake-yosys.sh
// RUN: FileCheck %s --check-prefix=OUT < %t/mutations.txt
//
// OUT: 1 M_const0_1
// OUT: 2 M_const1_1
// OUT: 3 M_inv_1
// OUT: 4 M_inv_2
// OUT: 5 M_cnot0_1
// OUT: 6 M_cnot1_1
