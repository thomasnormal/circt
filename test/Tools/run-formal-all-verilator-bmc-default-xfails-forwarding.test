// RUN: rm -rf %t
// RUN: mkdir -p %t/utils %t/verilator/tests/asserts %t/sv-tests %t/yosys %t/bin
// RUN: cp %S/../../utils/run_formal_all.sh %t/utils/run_formal_all.sh
// RUN: printf '#!/usr/bin/env bash\nexit 0\n' > %t/bin/circt-verilog
// RUN: printf 'assert_stable\n' > %t/utils/verilator-bmc-xfails.txt
// RUN: printf '#!/usr/bin/env bash\nset -euo pipefail\n: "${OUT:?}"\nif [[ "${XFAILS:-}" != "%t/utils/verilator-bmc-xfails.txt" ]]; then\n  echo "unexpected default XFAILS: ${XFAILS:-}" >&2\n  exit 1\nfi\nif ! grep -Fxq assert_stable "$XFAILS"; then\n  echo "missing expected xfail case in $XFAILS" >&2\n  exit 1\nfi\nprintf "XFAIL\\tassert_stable\\t/tests/asserts/assert_stable.sv\\n" > "$OUT"\necho "verilator-verification summary: total=1 pass=0 fail=0 xfail=1 xpass=0 error=0 skip=0 unknown=0 timeout=0"\n' > %t/utils/run_verilator_verification_circt_bmc.sh
// RUN: chmod +x %t/utils/run_formal_all.sh %t/bin/circt-verilog %t/utils/run_verilator_verification_circt_bmc.sh
// RUN: cd %t && utils/run_formal_all.sh --out-dir %t/out --circt-verilog %t/bin/circt-verilog --sv-tests %t/sv-tests --verilator %t/verilator --yosys %t/yosys --include-lane-regex '^verilator-verification/BMC$' --verilator-bmc-test-filter 'assert_stable'
// RUN: FileCheck %s --check-prefix=SUMMARY < %t/out/summary.tsv
//
// SUMMARY: verilator-verification{{[[:space:]]+}}BMC{{[[:space:]]+}}1{{[[:space:]]+}}0{{[[:space:]]+}}0
