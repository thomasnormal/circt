// RUN: rm -rf %t && mkdir -p %t
// RUN: printf 'module top(input a, output y); assign y = a; endmodule\n' > %t/design.v
// RUN: printf '#!/usr/bin/env bash\nset -euo pipefail\nscript=\"${@: -1}\"\nout=$(sed -n "s/.*-o \\\"\\([^\\\"]*\\)\\\".*/\\1/p" "$script" | tail -n1)\necho \"1 MUT\" > "$out"\n' > %t/fake-yosys.sh
// RUN: chmod +x %t/fake-yosys.sh
// RUN: not circt-mut generate --design %t/design.v --out %t/mutations.txt --count 5 --mode-weights arith=2,control=bad --yosys %t/fake-yosys.sh 2> %t/log1.txt
// RUN: FileCheck %s --check-prefix=ERR_WEIGHT < %t/log1.txt
// RUN: not circt-mut generate --design %t/design.v --out %t/mutations.txt --count 5 --mode-counts arith=3,control=2 --mode-weights arith=1,control=1 --yosys %t/fake-yosys.sh 2> %t/log2.txt
// RUN: FileCheck %s --check-prefix=ERR_CONFLICT < %t/log2.txt
//
// ERR_WEIGHT: circt-mut generate: invalid --mode-weight weight for control: bad
// ERR_CONFLICT: circt-mut generate: use either --mode-count(s) or --mode-weight(s), not both
