// RUN: rm -rf %t && mkdir -p %t/proj/out/matrix/lane1
// RUN: printf 'total_mutants\t6\nrelevant_mutants\t6\ndetected_mutants\t2\npropagated_not_detected_mutants\t2\nnot_propagated_mutants\t1\nnot_activated_mutants\t1\nerrors\t0\nglobal_filter_timeout_mutants\t0\nglobal_filter_lec_unknown_mutants\t0\nglobal_filter_bmc_unknown_mutants\t0\n' > %t/proj/out/matrix/lane1/metrics.tsv
// RUN: printf 'lane_id\tstatus\texit_code\tcoverage_percent\truntime_ns\tgate_status\tlane_dir\tmetrics_file\tsummary_json\tgenerated_mutations_cache_status\tgenerated_mutations_cache_hit\tgenerated_mutations_cache_miss\tgenerated_mutations_cache_saved_runtime_ns\tgenerated_mutations_cache_lock_wait_ns\tgenerated_mutations_cache_lock_contended\tconfig_error_code\tconfig_error_reason\tprequalify_summary_present\tprequalify_pair_file\tprequalify_log_file\tprequalify_total_mutants\tprequalify_not_propagated_mutants\tprequalify_propagated_mutants\tprequalify_create_mutated_error_mutants\tprequalify_probe_error_mutants\tprequalify_cmd_token_not_propagated_mutants\tprequalify_cmd_token_propagated_mutants\tprequalify_cmd_rc_not_propagated_mutants\tprequalify_cmd_rc_propagated_mutants\tprequalify_cmd_timeout_propagated_mutants\tprequalify_cmd_error_mutants\nlane1\tPASS\t0\t33.33\t1000\tPASS\t%t/proj/out/matrix/lane1\t%t/proj/out/matrix/lane1/metrics.tsv\t-\tdisabled\t0\t0\t0\t0\t0\t-\t-\t1\t%t/proj/out/matrix/prequalify_pair.tsv\t%t/proj/out/matrix/prequalify.log\t6\t2\t4\t0\t0\t0\t0\t0\t0\t0\t0\nlane_skip\tSKIP\t0\t-\t0\tSKIP\t%t/proj/out/matrix/lane_skip\t-\t-\tdisabled\t0\t0\t0\t0\t0\tSTOP_ON_FAIL\tskipped_after_fail\t1\t%t/proj/out/matrix/prequalify_pair.tsv\t%t/proj/out/matrix/prequalify.log\t1\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\n' > %t/proj/out/matrix/results.tsv
// RUN: printf 'lane_id\tpair_file\tlog_file\thas_summary\tprequalify_total_mutants\tprequalify_not_propagated_mutants\tprequalify_propagated_mutants\tprequalify_create_mutated_error_mutants\tprequalify_probe_error_mutants\tprequalify_cmd_token_not_propagated_mutants\tprequalify_cmd_token_propagated_mutants\tprequalify_cmd_rc_not_propagated_mutants\tprequalify_cmd_rc_propagated_mutants\tprequalify_cmd_timeout_propagated_mutants\tprequalify_cmd_error_mutants\nlane1\t-\t-\t1\t6\t2\t4\t0\t0\t0\t0\t0\t0\t0\t0\nlane_skip\t-\t-\t1\t1\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\n' > %t/proj/out/matrix/native_matrix_prequalify_summary.tsv
// RUN: printf 'run_id\ttimestamp_utc\tkey\tvalue\n1\t2026-02-10T00:00:00Z\tmatrix.lane_budget.worst_global_filter_timeout_mutants_value\t0\n1\t2026-02-10T00:00:00Z\tmatrix.lane_budget.worst_global_filter_lec_unknown_mutants_value\t0\n1\t2026-02-10T00:00:00Z\tmatrix.lane_budget.worst_global_filter_bmc_unknown_mutants_value\t0\n1\t2026-02-10T00:00:00Z\tmatrix.lane_budget.worst_errors_value\t0\n1\t2026-02-10T00:00:00Z\tmatrix.lane_budget.lanes_zero_detected_mutants\t0\n1\t2026-02-10T00:00:00Z\tmatrix.lane_budget.lowest_detected_mutants_value\t2\n1\t2026-02-10T00:00:00Z\tmatrix.lanes_skip\t1\n1\t2026-02-10T00:00:00Z\tmatrix.detected_mutants_sum\t2\n1\t2026-02-10T00:00:00Z\tmatrix.prequalify_drift_comparable\t1\n1\t2026-02-10T00:00:00Z\tmatrix.global_filter_timeout_mutants_sum\t0\n1\t2026-02-10T00:00:00Z\tmatrix.global_filter_lec_unknown_mutants_sum\t0\n1\t2026-02-10T00:00:00Z\tmatrix.global_filter_bmc_unknown_mutants_sum\t0\n1\t2026-02-10T00:00:00Z\tmatrix.runtime_ns_avg\t500\n1\t2026-02-10T00:00:00Z\tmatrix.runtime_ns_max\t1000\n1\t2026-02-10T00:00:00Z\tmatrix.runtime_ns_sum\t1000\n1\t2026-02-10T00:00:00Z\tmatrix.skip_budget_rows_non_stop_on_fail\t0\n2\t2026-02-10T01:00:00Z\tmatrix.lane_budget.worst_global_filter_timeout_mutants_value\t0\n2\t2026-02-10T01:00:00Z\tmatrix.lane_budget.worst_global_filter_lec_unknown_mutants_value\t0\n2\t2026-02-10T01:00:00Z\tmatrix.lane_budget.worst_global_filter_bmc_unknown_mutants_value\t0\n2\t2026-02-10T01:00:00Z\tmatrix.lane_budget.worst_errors_value\t0\n2\t2026-02-10T01:00:00Z\tmatrix.lane_budget.lanes_zero_detected_mutants\t0\n2\t2026-02-10T01:00:00Z\tmatrix.lane_budget.lowest_detected_mutants_value\t2\n2\t2026-02-10T01:00:00Z\tmatrix.lanes_skip\t1\n2\t2026-02-10T01:00:00Z\tmatrix.detected_mutants_sum\t2\n2\t2026-02-10T01:00:00Z\tmatrix.prequalify_drift_comparable\t1\n2\t2026-02-10T01:00:00Z\tmatrix.global_filter_timeout_mutants_sum\t0\n2\t2026-02-10T01:00:00Z\tmatrix.global_filter_lec_unknown_mutants_sum\t0\n2\t2026-02-10T01:00:00Z\tmatrix.global_filter_bmc_unknown_mutants_sum\t0\n2\t2026-02-10T01:00:00Z\tmatrix.runtime_ns_avg\t500\n2\t2026-02-10T01:00:00Z\tmatrix.runtime_ns_max\t1000\n2\t2026-02-10T01:00:00Z\tmatrix.runtime_ns_sum\t1000\n2\t2026-02-10T01:00:00Z\tmatrix.skip_budget_rows_non_stop_on_fail\t0\n' > %t/proj/trend.tsv
// RUN: printf '[report]\npolicy_mode = "trend-strict"\npolicy_stop_on_fail = "true"\n' > %t/proj/circt-mut.toml
// RUN: circt-mut report --project-dir %t/proj --mode matrix --trend-history trend.tsv > %t/out.txt
// RUN: FileCheck %s < %t/out.txt
//
// CHECK: policy.profile_count{{[[:space:]]}}2
// CHECK: policy.profile_1{{[[:space:]]}}formal-regression-matrix-composite-stop-on-fail-trend-strict
// CHECK: policy.profile_2{{[[:space:]]}}formal-regression-matrix-provenance-strict
// CHECK: value_gate.status{{[[:space:]]}}pass
// CHECK: trend.gate_status{{[[:space:]]}}pass
