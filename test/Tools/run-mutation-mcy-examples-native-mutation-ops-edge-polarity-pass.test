// RUN: rm -rf %t && mkdir -p %t/examples/bitcnt %t/bin
// RUN: printf "module bitcnt(input logic clk, input logic rst_n, input logic d, output logic q); always_ff @(posedge clk or negedge rst_n) begin if (!rst_n) q <= 1'b0; else q <= d; end endmodule\n" > %t/examples/bitcnt/bitcnt.v
// RUN: printf '#!/usr/bin/env bash\nset -euo pipefail\nsubcmd="$1"\nshift\nif [[ "$subcmd" != "cover" ]]; then\n  echo "expected cover subcommand" >&2\n  exit 9\nfi\nmutations_file=""\nwork_dir=""\nwhile [[ $# -gt 0 ]]; do\n  case "$1" in\n    --mutations-file) mutations_file="$2"; shift 2 ;;&\n    --mutations-file=*) mutations_file="${1#*=}"; shift ;;&\n    --work-dir) work_dir="$2"; shift 2 ;;&\n    --work-dir=*) work_dir="${1#*=}"; shift ;;&\n    *) shift ;;&\n  esac\ndone\nif [[ -z "$mutations_file" || -z "$work_dir" ]]; then\n  echo "missing native mutation args" >&2\n  exit 8\nfi\nif ! grep -q \"NATIVE_POSEDGE_TO_NEGEDGE\" \"$mutations_file\"; then\n  echo \"expected POSEDGE_TO_NEGEDGE in filtered native ops\" >&2\n  cat \"$mutations_file\" >&2\n  exit 7\nfi\nif ! grep -q \"NATIVE_NEGEDGE_TO_POSEDGE\" \"$mutations_file\"; then\n  echo \"expected NEGEDGE_TO_POSEDGE in filtered native ops\" >&2\n  cat \"$mutations_file\" >&2\n  exit 6\nfi\nmkdir -p \"$work_dir\"\nprintf \"detected_mutants\\t2\\nrelevant_mutants\\t3\\nerrors\\t0\\n\" > \"$work_dir/metrics.tsv\"\n' > %t/bin/circt-mut
// RUN: chmod +x %t/bin/circt-mut
// RUN: %S/../../utils/run_mutation_mcy_examples.sh \
// RUN:   --examples-root %t/examples \
// RUN:   --example bitcnt \
// RUN:   --circt-mut %t/bin/circt-mut \
// RUN:   --mutations-backend native \
// RUN:   --native-mutation-ops "POSEDGE_TO_NEGEDGE,NEGEDGE_TO_POSEDGE" \
// RUN:   --generate-count 4 \
// RUN:   --out-dir %t/out
