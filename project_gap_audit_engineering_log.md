# Project Gap Audit Engineering Log

## 2026-02-27
- Goal: produce a whole-project TODO / unsupported gap list beyond ImportVerilog.
- First pass included docs and produced many non-actionable documentation hits.
- Refined scope to code-focused paths: `include lib tools frontends unittests test utils cmake CMakeLists.txt`.
- Generated a reproducible audit report with full line-level entries and summary counts at `docs/PROJECT_GAPS_TODO_AUDIT.md`.
- Audited OpenTitan FPV BMC `entropy_src_sec_cm` failure: confirmed `circt-bmc` failed under `verify-each=true` with `llhd.final` parent legality.
- Added tests first to prove verifier gap:
  - `test/Dialect/LLHD/IR/basic.mlir` now covers `llhd.final` nested in `llhd.process` and `llhd.combinational`.
  - `test/Tools/circt-bmc/lower-to-bmc-llhd-final-parent-bmc.mlir` reproduces `lower-to-bmc` placing `llhd.final` under `verif.bmc`.
- Implemented LLHD verifier change:
  - Moved `FinalOp` parent checks from static trait to custom `FinalOp::verify`.
  - Allowed transient/legal parents observed in BMC lowering: `hw.module`, `llhd.process`, `llhd.combinational`, `verif.bmc`, `verif.lec`, `verif.refines`.
- Verified outcomes:
  - LLHD IR tests pass (`basic.mlir`, `errors.mlir`).
  - New `lower-to-bmc-llhd-final-parent-bmc.mlir` regression passes.
  - Real OpenTitan replay now succeeds for `entropy_src`: `BMC_RESULT=UNSAT` (previously verifier error).
- New gap discovered while continuing audit:
  - `rstmgr_sec_cm` lane now progresses past previous structural errors but shows high memory pressure/long runtime in SMT-LIB run (initial resource-guard hit at ~10GB RSS, auto-retry at higher cap still expensive).
- Audited and fixed OpenTitan compile-contract setup gap for `otp_ctrl_sec_cm`:
  - Root cause in setup log: FuseSoC rejected legacy two-part core name `earlgrey_dv:otp_ctrl_sva` as illegal VLNV.
  - Implemented normalization in `resolve_opentitan_formal_compile_contracts.py` to map two-part names to `lowrisc:<name>` for setup invocation.
  - Added regression: `test/Tools/resolve-opentitan-formal-compile-contracts-legacy-core-name.test`.
  - Manual validation confirms resolver now emits a non-error contract row for `otp_ctrl_sec_cm` (`setup_status=partial` instead of setup error).
- Post-fix follow-up gap for `otp_ctrl_sec_cm`:
  - BMC now reaches Verilog ingestion and fails with duplicate package definitions (`pwrmgr_reg_pkg`, `pwrmgr_pkg`) due mixed Earlgrey/Englishbreakfast package files in one compile list.
  - This is now a concrete compile-list sanitization parity gap (next target for resolver/pairwise prefiltering).
- Added `utils/generate_project_gap_writeups.py` to produce one paragraph per gap marker from the rg audit list.
- Generated `docs/PROJECT_GAPS_WRITEUP.md` with 2,071 per-entry paragraphs covering what is missing and a concrete fix direction.
- Classifier distinguishes implementation gaps, tooling gaps, test expectation gaps, and TODO-style deferred work to keep writeups actionable.
- Switched from auto-generated classification output to manual judgment writeups on user request.
- Added `docs/PROJECT_GAPS_MANUAL_WRITEUP.md` and completed entries 1-40 with one manually reasoned paragraph each.
- Kept ordering aligned to `out/project-gap-todo.all.txt` so remaining entries can be processed sequentially.
- Audited next BMC parity blocker from OpenTitan `otp_ctrl_sec_cm`: `llhd-mem2reg` generated invalid IR (`comb.xor` on aggregate struct operand) while rewriting projection probes across wait loops.
- Built a minimal reproducer (`ProjectionProbeAcrossWaitLoop`) showing the failure in isolation: local `llhd.sig` of `!hw.struct<value,unknown>`, probe of `llhd.sig.struct_extract`+`llhd.sig.extract`, backedge wait loop.
- Root cause: `getProjections` required forwarded block-argument incoming values to be identical; loop-carried aliases (`%sig` vs forwarded block arg) caused path resolution failure and fallback to whole-slot value substitution.
- Fix: rewrote projection-path discovery in `Mem2Reg.cpp` to recursively trace through `BranchOpInterface` successor operands and projection ops until reaching the slot, instead of requiring a single identical forwarded value.
- Added regression checks in `test/Dialect/LLHD/Transforms/mem2reg.mlir` under `@ProjectionProbeAcrossWaitLoop`.
- Validation: rebuilt `circt-opt` and ran `circt-opt --llhd-mem2reg ... | FileCheck ...`; regression passes and the minimal reproducer no longer produces verifier errors.
- Continued manual writeup with entries 41-70 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- Focused this batch on additional `circt-sim-compile` unsupported-format and trampoline ABI gaps.
- Continued manual writeup with entries 71-90, including explicit identification of scan false positives (`mktemp ...XXXXXX`) and runtime-test infrastructure gaps.
- Audited new OpenTitan `otp_ctrl_sec_cm` blocker after LLHD mem2reg fix: `convert-hw-to-smt` failed on `hw.constant 0 : i0` with live uses in `comb.mux`/`comb.icmp` (`i0`).
- TDD reproducer:
  - Standalone repro (`/tmp/hw_to_smt_i0_use_repro.mlir`) failed pre-fix with `failed to legalize operation 'hw.constant'`.
- Root cause:
  - `HWConstantOpConversion` is an `OpConversionPattern`; dialect conversion cannot adapt `hw.constant` producing `i0` because `i0` is intentionally not convertible to SMT bit-vectors.
  - So the conversion pattern path never legalized this op class in practice.
- Fix in `lib/Conversion/HWToSMT/HWToSMT.cpp`:
  - Added pre-conversion normalization pattern `NormalizeZeroWidthConstant` that rewrites `hw.constant : i0` to `arith.constant : i0` before partial conversion.
  - Kept SMT lowering behavior unchanged for legal-width HW constants.
- Regression tests:
  - Added `test/Conversion/HWToSMT/hw-to-smt-zero-width-constant.mlir` to assert `hw.constant : i0` is removed and `arith.constant : i0` remains through `--convert-hw-to-smt`.
  - Updated `test/Conversion/HWToSMT/hw-to-smt-errors.mlir` to track an actually unsupported case (`hw.struct_create` with `i0` struct field).
- Validation:
  - Rebuilt `circt-opt`.
  - `circt-opt --convert-hw-to-smt test/Conversion/HWToSMT/hw-to-smt-zero-width-constant.mlir | FileCheck ...` passes.
  - `circt-opt --convert-hw-to-smt --verify-diagnostics test/Conversion/HWToSMT/hw-to-smt-errors.mlir` passes.
  - Standalone repro now succeeds (`EXIT:0`).
- Follow-up OpenTitan replay (`otp_ctrl_sec_cm`) after HWToSMT i0 fix exposed a new hard crash in `ConvertCombToSMT`: assertion in `TypeRange` from `comb.extract` lowering when result type was `i0`.
- Root-cause localization via stack symbolization (`addr2line`): crash in `ExtractOpConversion` constructing `smt.extract` with null converted type; pass path was `ConvertCombToSMTPass`.
- Fix in `lib/Conversion/CombToSMT/CombToSMT.cpp`:
  - Added zero-width normalization patterns run before dialect conversion:
    - `NormalizeZeroWidthExtract`: `comb.extract (...)->i0` -> `arith.constant 0 : i0`.
    - `NormalizeZeroWidthMux`: `comb.mux ... : i0` -> representative operand.
    - `NormalizeZeroWidthICmp`: `comb.icmp` on `i0` -> `hw.constant` i1 truth value by predicate.
  - Added defensive handling in conversion patterns for zero-width extract/mux/icmp paths.
- Regression coverage:
  - Added `test/Conversion/CombToSMT/comb-to-smt-zero-width.mlir` to ensure zero-width extract/mux/icmp no longer crash and lower to a valid SMT-visible result.
  - Updated `test/Conversion/CombToSMT/comb-to-smt-error.mlir` so the existing zero-width parity expected-fail remains live (not dead-code eliminated).
- Validation:
  - Rebuilt `circt-opt` and `circt-bmc`.
  - `comb-to-smt-zero-width.mlir` FileCheck passes.
  - `comb-to-smt-error.mlir` verify-diagnostics passes.
  - Prior direct `circt-bmc` crash repro no longer aborts.
- OpenTitan status progression:
  - `otp_ctrl_sec_cm` moved from `CIRCT_BMC_ERROR` (crash/legalization blockers) to `FAIL (SAT)`.
  - This confirms the conversion/runtime blockers are removed for this lane; next gap is SAT quality under LLHD abstraction warnings (process/interface inputs still unconstrained and may yield spurious witnesses).
- Continued manual writeup with entries 91-130, focusing on PyRTG TODOs, AVIP runner guards, and Yosys-SVA policy-related unsupported flows.
- Continued manual writeup with entries 131-160, covering MooreRuntime TODOs and additional connectivity/formal script gaps.
- Continued manual writeup with entries 161-230, including circt-mut native parity gaps, PyCDE TODOs, and many scanner false positives in test fixtures/valgrind metadata.
- Continued manual writeup with entries 231-260 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered LLHD deseq/control-flow TODOs, Verilog LSP macro/location gaps, SystemC copy-from-upstream debt, and additional false positives (`AnyInteger`, `record_xxx_access`).
- Next manual entry to process is 261.
- Continued manual writeup with entries 261-290 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block focused on Synth transform TODOs (cut rewriter/tech mapping/pipeline), LEC construction debt, and additional scanner false positives in FIRRTL analysis API lines.
- Next manual entry to process is 291.
- Continued manual writeup with entries 291-320 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered Synth/Kanagawa TODOs, dependency/debug-info TODOs, UVM phase TBDs, and false-positive `anyInstance...` strings in `lib/Analysis/TestPasses.cpp`.
- Next manual entry to process is 321.
- Continued manual writeup with entries 321-350 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered remaining UVM phase search/scope TODOs, arcilator nested-region pipeline TODOs, RTG/ESI/SystemC/Handshake TODOs, and scanner false positives in `lib/Dialect/Sim/SimOps.cpp` (`convertToDouble`).
- Next manual entry to process is 351.
- Continued manual writeup with entries 351-380 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered ESI runtime/python TODOs, Seq/HW/FIRRTL TODO clusters, manifest/services architecture debt, and additional scan false positives/non-actionable comments (`FIRRTLVisitors`, `JSON convertToDouble`, test RUN fixture).
- Next manual entry to process is 381.
- Continued manual writeup with entries 381-410 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered SV prettification/scheduling TODOs, ESI backend/runtime gaps (types, mapping checks, polling/notification, security), datapath/FIRRTL utility TODOs, and scan false positives in lit test fixture lines.
- Noted one concrete functional regression marker in tests: `$strobe` end-of-timestep semantics mismatch (`test/Tools/circt-sim/syscall-strobe.sv`).
- Next manual entry to process is 411.
- Continued manual writeup with entries 411-440 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block included datapath/RTG/ESI backend TODOs, multiple concrete `circt-sim` syscall semantic regression markers (shortrealtobits/randomize-with/random/monitor/isunbounded/generate), and scanner false positives in lit fixture lines plus `AnyInteger` type declarations.
- Next manual entry to process is 441.
- Continued manual writeup with entries 441-470 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTL op/verifier/property TODOs, comb folding completeness gaps, Calyx helper/lowering TODOs, and additional concrete `circt-sim` syscall regression markers (`$fread`, file-I/O sequence behavior).
- Next manual entry to process is 471.
- Continued manual writeup with entries 471-500 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTL fold TODO clusters, ESI cosim DPI/runtime TODOs, FIREmitter TODOs, comb transform TODOs, and scanner false positives for Arc ODS `AnyInteger` declarations.
- Next manual entry to process is 501.
- Continued manual writeup with entries 501-530 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTL parser/spec-workaround TODOs, IMConstProp aggregate/when gaps, FIRRTL type/interface TODOs, and parser canonicalization ownership notes.
- Next manual entry to process is 531.
- Continued manual writeup with entries 531-560 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTL transform/inliner TODOs, Pipeline/Calyx cleanup TODOs, Kanagawa nested-symbol lookup debt, and multiple false positives from `anyInstance...` analysis API uses.
- Next manual entry to process is 561.
- Continued manual writeup with entries 561-590 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTL transform TODOs (DCE/infer/layers/dedup/link/memory), LowerDPI/LowerCHIRRTL TODOs, concrete `circt-sim` syscall regressions (`tlul_bfm` timeout display and `$ungetc`), and additional scan false positives (`anyInstance...`, `convertToDouble`).
- Next manual entry to process is 591.
- Continued manual writeup with entries 591-620 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered UVM suspend/resume stubs, BMC unsupported-use gating, Calyx/arcilator TODO carryovers, real `circt-verilog-lsp` interface hover/definition feature gaps, and many valgrind metadata false positives.
- Next manual entry to process is 621.
- Continued manual writeup with entries 621-650 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered recurring ExportSystemC/EmitC TODOs, circt-sim format/trampoline capability boundaries, and many scanner false positives (Arc `AnyInteger`, LSP valgrind metadata, test command/check lines).
- Next manual entry to process is 651.
- Continued manual writeup with entries 651-680 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered circt-sim trampoline ABI unsupported fallback signaling, ExportSystemC unsupported emission placeholders, ImportVerilog unsupported-SVA policy surface, and many LSP valgrind-metadata false positives.
- Next manual entry to process is 681.
- Continued manual writeup with entries 681-710 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered TruthTable complexity debt, ExportSystemC/Coverage DB notes, and a large run of scanner false positives from lit fixtures/check lines (drop-remarks, JIT policy gate, LSP valgrind metadata).
- Next manual entry to process is 711.
- Continued manual writeup with entries 711-740 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block was dominated by scanner false positives in JIT summarizer test fixture/check lines, plus real scheduling TODO carryovers and one upstreaming TODO in DependenceAnalysis.
- Next manual entry to process is 741.
- Continued manual writeup with entries 741-770 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered firtool pipeline cleanup TODOs, Tcl FIR-loading gap, dynamic-shape memref flattening TODO, DebugInfo/DependenceAnalysis TODOs, and many scanner false positives in FIRRTLInstanceInfo/TestPasses/test-literal lines.
- Next manual entry to process is 771.
- Continued manual writeup with entries 771-800 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered ImportLiberty/SystemC copy-paste debt, LLHD deseq/unroll/remove-control-flow TODOs, CAPI/Bindings TODOs, and test expectation false positives for unsupported-ABI and native-module-init regressions.
- Next manual entry to process is 801.
- Continued manual writeup with entries 801-830 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered RTG elaboration/register-allocation/assembly TODOs, LLHD RemoveControlFlow boundary, Synth CutRewriter coverage gap, and many false positives from `unsupportedInstr*` identifiers plus test fixture check lines.
- Next manual entry to process is 831.
- Continued manual writeup with entries 831-860 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block focused on Synth CutRewriter/TechMapper/SynthesisPipeline TODO clusters, LLHD inline/hoist limits, Comb-to-Datapath/Arith variadic gaps, and HWToSMT unsupported type boundaries; also marked `TechMapper.cpp:201` as a `convertToDouble` scanner false positive.
- Next manual entry to process is 861.
- Continued manual writeup with entries 831-860 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block centered on Synth CutRewriter/TechMapper/SynthesisPipeline TODO clusters, LLHD inline/hoist gaps, CombToDatapath/CombToArith variadic limitations, and HWToSMT unsupported type boundaries.
- Marked `TechMapper.cpp:201` as a `convertToDouble` scanner false positive.
- Next manual entry to process is 861.
- Corrected an accidental duplicate append of entries 831-860 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md` by removing the duplicated block and restoring contiguous numbering.
- Continued manual writeup with entries 861-890 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered Comb/HW/VerifToSMT/CFToHandshake/RTG/HWToBTOR2 TODO clusters and flagged several `unsupportedOp` identifier hits as scanner false positives.
- Next manual entry to process is 891.
- Continued manual writeup with entries 891-920 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered HWToBTOR2 boundary diagnostics, Synth fold/QoR TODOs, SimToSV/SeqToSV TODOs, Arc format/ABI portability gaps, AffineToLoopSchedule/FSM conversion boundaries, and LongestPathAnalysis type/address coverage gaps.
- Explicitly classified `LLHDOps.cpp:917` and Affine local `unsupported` variable/assignment lines as non-actionable scanner false positives.
- Next manual entry to process is 921.
- Continued manual writeup with entries 921-950 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered Kanagawa RAUW conversion-workarounds, FirMem/HW bitcast type-coverage TODOs, OM FreezePaths instance-choice limits, SCFToCalyx control-flow boundaries, and the concrete `$save` warning regression marker in circt-sim tests.
- Classified `SCFToCalyx.cpp:1683` and `SCFToCalyx.cpp:2878` as defensive/unreachable guard paths (non-actionable unless surrounding assumptions expand).
- Next manual entry to process is 951.
- Continued manual writeup with entries 951-980 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block was dominated by FIRRTLToHW TODO/unsupported boundaries (force-name/NLA verification, symbol-collision handling, partial bundle connects, invalid/value substitution coverage, verification-lowering policy), plus FIRRTLUtils traversal/error-plumbing TODOs.
- Marked `SimOps.cpp:97/100` (`convertToDouble`) and the OpenTitan parity fixture token line (`xxxx9999...`) as scanner false positives.
- Classified `LowerToHW.cpp:5102` as supporting diagnostic context for the real substitution-coverage gap at `5099`.
- Next manual entry to process is 981.
- Continued manual writeup with entries 981-1010 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block included many OpenTitan connectivity parity test-fixture false positives (`xxxx9999...`), plus real gaps in Handshake/Sim DPI/proceduralization and ExportVerilog type/printing/attribute coverage.
- Marked `CreateVTables.cpp:151/168` as intentional behavior commentary (skip unimplemented/pure-virtual entries), not standalone unresolved TODO debt.
- Marked `ExportVerilog.cpp:2529` as upstream-trait/infrastructure debt rather than immediate local implementation gap.
- Next manual entry to process is 1011.
- Continued manual writeup with entries 1011-1040 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block is almost entirely one repeated root issue in ExportVerilog ExprEmitter: SV attributes are not yet emitted for many expression op visitors (hard error path).
- Consolidated repeated entries by explicitly linking each to the same root gap, while separately capturing independent TODOs (`XMRRef` code dedup, zero-width constant/field handling, and `$sformatf` line-break quality).
- Next manual entry to process is 1041.
- Continued manual writeup with entries 1041-1070 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block split into repeated ExportVerilog roots: (a) expression-level SV-attribute emission hard errors, (b) statement-level SV-attribute emission hard errors, and (c) pretty-printer wrap/location TODOs.
- Captured independent boundaries for unhandled expression/property fallback emitters and unpacked-struct emission TODOs.
- Next manual entry to process is 1071.
- Continued manual writeup with entries 1071-1100 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block continued the repeated ExportVerilog statement-level SV-attribute emission boundary, plus formatting/source-info TODOs, split-output typedef policy questions, and Seq canonicalization/lowering limitations.
- Marked `syscall-queue-stochastic.sv:8` as intentional unsupported-legacy policy test coverage rather than new implementation debt.
- Next manual entry to process is 1101.
- Continued manual writeup with entries 1101-1130 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block combined ExportVerilog-prep TODOs, circt-sim syscall semantic regressions (`$monitor/$strobe/$shortrealtobits/$isunbounded`), FIRRTL verifier/property migration gaps, and ESI/SV extraction traversal TODOs.
- Marked legacy stochastic/PLD task tests (`syscall-q-full`, `syscall-pld-*`) as intentional unsupported-policy coverage rather than fresh implementation debt.
- Marked `SVOps ConstantX/ConstantZ` and FIRRTL `Unsupported Flow type` `llvm_unreachable` lines as invariant/defensive paths (non-actionable scanner hits).
- Next manual entry to process is 1131.
- Continued manual writeup with entries 1131-1160 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIREmitter unsupported-attr/expression/type-alias emission gaps, HWEliminateInOutPorts capability boundaries, DatapathToComb/PrettifyVerilog TODOs, and FIRRTLFolds completeness TODOs.
- Marked the legacy syscall queue/PLD expected-error lines in this range as policy tests (from prior block), while keeping real runtime TODOs (`$monitor/$strobe/$shortrealtobits/$isunbounded`) actionable.
- Next manual entry to process is 1161.
- Continued manual writeup with entries 1161-1190 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTLFolds canonicalization TODOs, real SV packed-array legalization limits, FIRRTL annotation/reference-validation gaps, Windows ESI Python stubgen portability, and substantial FIRParser grammar/spec-compatibility debt.
- Explicitly classified header-comment hits in `HWLegalizeModules.cpp` and strict-schema/negative-test lines (`select-opentitan-connectivity-cfg-invalid-row-kind.test`, FIRRTL >=3 string-int literal rejection) as non-actionable scanner/policy markers.
- Next manual entry to process is 1191.
- Continued manual writeup with entries 1191-1220 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRParser formal-syntax migration (`bound` legacy form), ESI Python runtime/codegen TODOs (service-port registration, timeout/callback APIs, >64-bit integer emission, callback leaks/crash risk), and IMConstProp aggregate/When precision gaps.
- Reclassified several scanner overmatches as non-actionable at source level: commandline `CHECK-DAG` help text, FIRParserAsserts policy comments, and abstract-base `assert False` placeholders in `esiaccel/types.py`.
- Next manual entry to process is 1221.
- Continued manual writeup with entries 1221-1250 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered SSP scheduler dispatch limits, FIRRTL type/interface TODO clusters, CombToSynth lowering/perf boundaries (signed div/mod, i0 signed ops, prefix-tree generalization), and ModuleInliner/RemoveUnusedPorts capability gaps.
- Marked repeated `anyInstanceInEffectiveDesign(...)` hits in `CreateSiFiveMetadata.cpp` as scanner false positives, while keeping the adjacent real metadata-policy TODOs (`incongruity`, `unresolvable distinct`) actionable.
- Next manual entry to process is 1251.
- Continued manual writeup with entries 1251-1280 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered ModuleInliner NLA rename propagation TODOs, ExtractInstances hack/hardcoded-prefix debt, InferReadWrite/MergeConnections/IMDeadCodeElim coverage limits, and HandshakeToHW type/constant/i0 boundaries.
- Classified repeated `anyInstanceInDesign(...)` / `anyInstanceInEffectiveDesign(...)` hits in ExtractInstances and MemToRegOfVec as scanner false positives (normal design-membership filters).
- Marked ExportSystemC `errors.mlir` lines as intentional negative tests and `basic.mlir` precedence TODO lines as test-coverage placeholders rather than standalone production gaps.
- Next manual entry to process is 1281.
- Continued manual writeup with entries 1281-1310 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTL transform TODOs in LowerOpenAggs/LinkCircuits/LowerMemory and a large MooreToCore gap cluster (vtable/class ports, four-valued semantics, constraints, net kinds, OOB behavior, formatting, queue sort containers).
- Reclassified OpenTitan stopat-selector test row lines as intentional negative coverage and filtered several scanner-only hits (`anyInstanceInEffectiveDesign`, `anyInstanceUnderLayer`, and MooreToCore UVM-report ABI signature comments).
- Next manual entry to process is 1311.
- Continued manual writeup with entries 1311-1340 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered MooreToCore late-stage lowering boundaries (stream ops, array/key/type handling, scanf destinations, unpacked type modeling), plus FIRRTL/ESI/HWToSystemC TODO clusters.
- Reclassified comment-only ABI signature lines and design-membership gating checks as non-actionable scanner hits; treated ESI header-version rejection as intentional compatibility gating.
- Next manual entry to process is 1341.
- Continued manual writeup with entries 1341-1370 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered LoopScheduleToCalyx/LTLToCore capability boundaries, LowerLayers and LowerDomains TODO clusters, ESI backend runtime TODOs (RPC manifest race and Cosim hostmem validation/types), and one LowerIntmodules migration debt.
- Marked scanner-only false positives for fixture tokens, `anyInstanceInEffectiveDesign(...)` guards, and multiple `indexToDomain[...]` bookkeeping lines; also treated `llvm_unreachable` comparison-predicate line as defensive enum exhaustiveness.
- Next manual entry to process is 1371.
- Continued manual writeup with entries 1371-1400 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered ESI trace/RPC backend TODOs, GrandCentral unsupported/YAML/workaround clusters, LowerTypes symbol/annotation limitations, and ImportVerilog event-control pipeline gating.
- Reclassified scanner-only bookkeeping hits (`indexToDomain` iteration and `anyInstanceInEffectiveDesign` guard), treated `yaml.type="unsupported"` lines as marker-emission duplicates of existing unsupported-construct root cause, and marked `BitVector::toString` unsupported-base throw as intentional API boundary.
- Next manual entry to process is 1401.
- Continued manual writeup with entries 1401-1430 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered FIRRTL/ESI maintenance TODOs plus a concentrated ImportVerilog CrossSelect capability boundary set (constant-only intersect/matches/set forms, nested-with/set exclusions, tuple/container restrictions).
- Reclassified scanner-only hits in design-membership filters (`anyInstanceInEffectiveDesign`) and documentation/header comments; noted ESI non-Linux/Windows platform boundary (`#eror` branches) as real portability debt.
- Next manual entry to process is 1431.
- Continued manual writeup with entries 1431-1460 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block was dominated by ImportVerilog CrossSelect boundary diagnostics: non-constant intersect/bin/set/transition forms, iterator width limits, finite-domain/tuple-space caps, unsupported default/default-sequence bins, and detached bin/parent/target kinds.
- Treated repeated path-specific diagnostics as manifestations of the same semantic limits and kept writeup focused on actionable root capabilities.
- Next manual entry to process is 1461.
- Continued manual writeup with entries 1461-1490 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block included final CrossSelect negation/range constraints, FIRRTL transform TODOs (blackbox conflict checks, probe/memtap limits, infer-width edge cases), Datapath/ESI TODOs, and a new ImportVerilog AssertionExpr sampled-value unsupported-type cluster.
- Reclassified scanner-only helper/policy hits (`emitUnsupportedSvaDiagnostic`, `continueOnUnsupportedSVA`, abstract base throws in ESI `Types.h`, and design-membership gating) to avoid overstating debt.
- Next manual entry to process is 1491.
- Continued manual writeup with entries 1491-1520 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This slice was dominated by ImportVerilog `AssertionExpr.cpp` diagnostics: repeated sampled-value type limits, `$past` with sampled-value-controls type boundaries, and sequence match-item typing/operator restrictions.
- Marked policy-gating lines (`continueOnUnsupportedSVA && !inAssertionExpr`) as scanner-level context rather than standalone feature gaps.
- Next manual entry to process is 1521.
- Continued manual writeup with entries 1521-1550 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered AssertionExpr runtime/semantic unsupported cases (checkpoint/restart, SDF annotate, sampled-value placeholder fallback, unsupported system calls), one InferResets brittleness TODO, and a broad ImportVerilog TimingControls unsupported-kind cluster.
- Reclassified fallback-policy scaffolding and one `llvm_unreachable("unsupported type")` exhaustiveness guard as non-actionable scanner-level noise.
- Next manual entry to process is 1551.
- Continued manual writeup with entries 1551-1580 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block finished the TimingControls unsupported-kind cluster, filtered LLHD unroll-loop test fixture labels as non-actionable scan noise, and captured ImportVerilog Statements gaps around case-pattern matching, `inside` set-membership, and immediate-assertion kind coverage.
- Marked unsupported-SVA attribute constants / continue-mode wiring as implementation scaffolding rather than direct unresolved work items.
- Next manual entry to process is 1581.
- Continued manual writeup with entries 1581-1610 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered ImportVerilog Statements/Types unsupported paths, ESI runtime backend TODOs (trace mode, RPC race, DPI/cosim MMIO unimplemented hooks), and mixed test-fixture expectation noise.
- Classified helper fallback wiring (`tolerateUnsupportedSVA`) and negative-test expected-error lines as non-actionable scanner hits while retaining root capability gaps they reference.
- Next manual entry to process is 1611.
- Continued manual writeup with entries 1611-1640 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block captured ESI runtime TODOs (reset handshake, callback/completion API, copy-avoidance), Comb fold/canonicalization TODO clusters, and a large ImportVerilog Structure interface-port capability boundary set.
- Filtered scanner-only variable-name hits (`hasAnyIff`) and retained only actionable interface/construct/package unsupported diagnostics.
- Next manual entry to process is 1641.
- Continued manual writeup with entries 1641-1670 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered ImportVerilog Structure gaps for unsupported net/lvalue/timing kinds, extensive UDP table symbol/row/state/output limitations, and primitive tristate/high-Z modeling TODOs.
- Marked repeated `unsupportedSymbol` temporary-variable lines as scanner artifacts while keeping the actual `emitDropped("unsupported ...")` paths as actionable gaps.
- Next manual entry to process is 1671.
- Continued manual writeup with entries 1671-1700 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block covered remaining ImportVerilog Structure primitive/port/class-member boundaries and mixed in multiple test-fixture scanner false positives (`UNSUPPORTED` metadata, expected-error text, and FIRRTL instance-info `CHECK` output lines).
- Kept actionable focus on primitive semantics, generic interface-port resolution, and class-method prototype support gaps; filtered repetitive test expectation text.
- Next manual entry to process is 1701.
- Continued manual writeup with entries 1701-1730 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block was entirely `test/Analysis/firrtl-test-instance-info.mlir` `FileCheck` expectation lines (`anyInstance*` fields) and was classified as scanner noise rather than implementation debt.
- Kept these entries concise and explicitly marked them as test oracle text.
- Next manual entry to process is 1731.
- Continued manual writeup with entries 1731-1760 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block remained entirely `test/Analysis/firrtl-test-instance-info.mlir` expectation lines and was classified as scanner noise (test oracle text) rather than implementation debt.
- Next manual entry to process is 1761.
- Continued manual writeup with entries 1761-1790 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block finished the long FIRRTL instance-info test-oracle run, captured one Comb `BalanceMux` timing-aware split TODO, filtered HW parameter `"xxx"` fixture placeholders and `hasAnyIff` local-variable scanner hits, then started a new ImportVerilog Expressions unsupported-op/type cluster (select, assignment/lvalue, unary, unpacked eq/neq/case-eq variants).
- Next manual entry to process is 1791.
- Continued manual writeup with entries 1791-1820 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block stayed in ImportVerilog `Expressions.cpp`: case-ineq coverage limits, generic unsupported operator/expression fallbacks, covergroup/coverpoint/cross/process/mailbox/semaphore method coverage gaps, `$cast` destination restrictions, streaming concat element limits, conversion TODOs, and system-call arity fallback gaps.
- Filtered `hasAnyIff` local-variable hits as scanner noise; kept legacy stochastic queue functions as intentional-but-real unsupported legacy scope.
- Next manual entry to process is 1821.
- Continued manual writeup with entries 1821-1850 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block mixed mostly test-fixture false positives (expected-error lines, `UNSUPPORTED: system-windows`, scenario naming, and `RUN` options containing `unsupported-*`) with a small Calyx real-gap cluster (`CompileControl` TODOs and CalyxLoweringUtils type assumptions).
- Kept Calyx constraints as actionable; treated test comments/TODOs as suite-maintenance notes rather than product debt lines.
- Next manual entry to process is 1851.
- Continued manual writeup with entries 1851-1880 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block was dominated by negative-test/oracle lines (`expected-error`, `UNSUPPORTED: system-windows`, and fixture names containing `Unsupported*`), with one test-comment TODO (`firrtl/ref.mlir`) and one scanner anomaly in CalyxEmitter (`convertToDouble`) classified as non-actionable.
- Next manual entry to process is 1881.
- Continued manual writeup with entries 1881-1910 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block was mostly parser/canonicalizer/reduction negative-test fixture lines (many `UNSUPPORTED: system-windows`, `expected-error`, and `Unsupported*` test names), plus one actionable Calyx TODO in `CalyxOps.cpp` and several test-maintenance TODO/FIXME notes.
- Reclassified a non-gap parser comment in `CalyxOps.cpp` (`accompanying '?'`) and Moore unknown-bit expected literals as scanner false positives.
- Next manual entry to process is 1911.
- Continued manual writeup with entries 1911-1940 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block included many test-fixture-only hits (`UNSUPPORTED: system-windows`, expected-error/check text, and naming markers), plus actionable Arc dialect/compiler gaps: unimplemented Arc inliner legality hooks, Arc fold hoisting TODO, runtime cost estimate TODO/FIXME cluster, InferMemories write-latency limitation, and Dedup robustness TODO.
- Next manual entry to process is 1941.
- Continued manual writeup with entries 1941-1970 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block mixed Arc pass TODO/FIXME items (AllocateState sharing assumptions, ArcCanonicalizer symbol-listener gaps, SplitLoops over-splitting, LowerLUT analysis factoring, LowerClocksToFuncs multi-initial/final limits, MuxToControlFlow heuristics/safety assumptions) with many test-oracle/fixture false positives (`xxx` placeholders, expected-error lines, and negative-case comments).
- Reclassified several scanner overmatches (`thenYield` insertion-point lines, `thenYield().erase()`, and `moveToDomain` declaration) as non-actionable.
- Next manual entry to process is 1971.
- Continued manual writeup with entries 1971-2000 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block captured Arc actionable TODOs in IsolateClocks/InlineArcs/InferStateProperties and filtered many conversion-test fixture hits (`unsupported` comments, long placeholder identifiers, `xxx` naming-conflict checks, and expected-error oracles).
- Marked ExportVerilog test FIXMEs/TODOs as fixture commentary pointing to possible upstream/export-quality work rather than direct code-line debt.
- Next manual entry to process is 2001.
- Continued manual writeup with entries 2001-2030 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block included one real conversion-gap FIXME note in MooreToCore test commentary, one ImportAIGER test-maintenance TODO, and many non-actionable fixture/oracle hits (`UNSUPPORTED: valgrind`, unknown-bit constants, and `DIAG-NOT` assertions).
- Reclassified assoc-array "tests the fix for unsupported..." comments as historical regression-intent notes rather than active unsupported-feature gaps.
- Next manual entry to process is 2031.
- Continued manual writeup with entries 2031-2060 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- This block was mostly regression-oracle metadata (`UNSUPPORTED: valgrind`, `DIAG-NOT`, and `RUN:` options) plus several real known capability boundaries captured by tests: unsupported non-constant cross-select intersect ranges, unsupported `$past` sampled/event forms, and circt-sim checkpoint/SDF system-call limits.
- Preserved distinction between actionable underlying feature gaps and non-actionable fixture text at each line.
- Next manual entry to process is 2061.
- Continued manual writeup with final entries 2061-2071 in `docs/PROJECT_GAPS_MANUAL_WRITEUP.md`.
- Final block remained mostly test-oracle metadata around SVA continue-on-unsupported behavior, with strict vs warning-mode diagnostic expectations documenting current sampled-value limitations.
- `out/project-gap-todo.all.txt` is now fully processed through its last line (2071 entries total).
- Continued after completing manual entries (1-2071) by reducing scanner noise in auto writeup tooling.
- Added false-positive heuristics to `utils/generate_project_gap_writeups.py`:
  - Classifies fixture/oracle patterns as `likely-false-positive` (e.g. `CHECK/DIAG/RUN/expected-*`, `UNSUPPORTED: valgrind`, spec-ref `XXX:` notes, unknown-bit literal payloads, supported/unsupported test module names, and `mktemp ...XXXXXX`).
  - Added `--drop-likely-false-positives` flag to emit an actionable-only report.
- Added regression test `test/Tools/generate-project-gap-writeups-filtering.test` covering both classification and drop mode.
- Validation notes:
  - Direct script check on synthetic input confirms expected behavior (5 entries with 3 `likely-false-positive`; filtered report drops to 2 actionable entries).
  - Full `llvm-lit` invocation in this sandbox hit Python `multiprocessing` semaphore permission limits; test commands were validated manually instead.
- SVA gap closure (ImportVerilog): `$past` with sampled-value controls on `event` operands was still rejected (`unsupported $past value type with sampled-value controls (input type: '!moore.event')`).
- TDD flow:
  - Added regression `test/Conversion/ImportVerilog/sva-past-event-sampling-supported.sv` and confirmed it failed pre-fix with the unsupported diagnostic.
- Implementation:
  - In `lib/Conversion/ImportVerilog/AssertionExpr.cpp`, generalized `lowerPastWithSamplingControl` to treat `event` as a supported direct-storage sampled type (preserve `!moore.event` storage/result instead of forcing bit-vector lowering).
  - In `lib/Conversion/ImportVerilog/Expressions.cpp`, added explicit `event` equality/inequality lowering through boolean context (`convertToBool` + `i1` conversion + `moore.eq/ne`) so event comparisons no longer fall into the generic simple-bitvector path.
- Follow-up test maintenance:
  - Updated `test/Conversion/ImportVerilog/sva-continue-on-unsupported.sv` and `test/Conversion/ImportVerilog/sva-immediate-past-event-continue-on-unsupported.sv` to keep continue-mode coverage using a still-unsupported class-handle `$past` case (instead of now-supported event case).
- Validation (manual, due sandbox lit multiprocessing limits):
  - `circt-verilog --no-uvm-auto-include --ir-moore test/Conversion/ImportVerilog/sva-past-event-sampling-supported.sv | FileCheck ...` (pass).
  - `sva-continue-on-unsupported.sv` strict/warn/IR RUN pipelines (pass).
  - `sva-immediate-past-event-continue-on-unsupported.sv` strict/warn/IR RUN pipelines (pass).
  - `circt-translate --import-verilog test/Conversion/ImportVerilog/past-clocking.sv | FileCheck ...` (pass).
- SVA gap closure (ImportVerilog follow-up): `$past` with sampled-value controls now supports class-handle operands in assertion contexts.
- TDD flow:
  - Added `test/Conversion/ImportVerilog/sva-past-class-handle-sampled-controls.sv` and confirmed pre-fix failure (`unsupported $past value type with sampled-value controls` for `!moore.class<...>`).
- Implementation:
  - `lib/Conversion/ImportVerilog/AssertionExpr.cpp` (`lowerPastWithSamplingControl`): extended direct-storage sampled-type set with `moore::ClassHandleType` so class handles are stored/sampled natively (type-preserving) under clocking/enable controls.
- Regression/coverage maintenance:
  - Since class-handle sampled `$past` is now supported, moved continue-on-unsupported sentinels to a still-unsupported type (`virtual interface`) in:
    - `test/Conversion/ImportVerilog/sva-continue-on-unsupported.sv`
    - `test/Conversion/ImportVerilog/sva-immediate-past-event-continue-on-unsupported.sv`
- Validation (manual RUN pipelines):
  - New class-handle positive regression passes.
  - Updated strict/warn/IR continue-on-unsupported tests pass with virtual-interface diagnostic.
  - Existing event-sampled `$past` regression and `past-clocking.sv` regression continue to pass.
- SVA gap closure (ImportVerilog additional): `$past` with sampled-value controls now supports virtual-interface operands.
- Implementation:
  - `lib/Conversion/ImportVerilog/AssertionExpr.cpp` (`lowerPastWithSamplingControl`): added `moore::VirtualInterfaceType` to the direct-storage sampled-type set alongside class/event/aggregate forms.
- New regression:
  - Added `test/Conversion/ImportVerilog/sva-past-virtual-interface-sampled-controls.sv` verifying successful lowering (`moore.wait_event`, `moore.virtual_interface_cmp`, clocked assert/cover).
- Continue-mode unsupported sentinel maintenance:
  - Moved strict/warn continue-on-unsupported tests from virtual-interface to still-unsupported covergroup-handle sampled `$past`:
    - `test/Conversion/ImportVerilog/sva-continue-on-unsupported.sv`
    - `test/Conversion/ImportVerilog/sva-immediate-past-event-continue-on-unsupported.sv`
  - Immediate test uses `assert($past(cg,...))` (no equality) to avoid unrelated covergroup equality lowering errors while still exercising unsupported sampled-value diagnostic and continue-mode assertion retention.
- Validation (manual RUN pipelines):
  - New virtual-interface positive regression passes.
  - Updated continue-on-unsupported strict/warn/IR pipelines pass.
  - Existing event/class sampled `$past` positive regressions and `past-clocking.sv` pass.
- Scoped execution started per user direction: focus narrowed to ImportVerilog, MooreToCore, circt-sim runtime (non-AOT), and UVM only.
- Added scoped implementation backlog doc: `docs/PROJECT_GAPS_SCOPED_FIX_PLAN.md` with prioritized waves and concrete file/test ownership.
- Performed early reality-check on circt-sim syscall TODO regressions using `build_clang_test` tools + FileCheck. Verified 11 tests are currently green:
  - `syscall-strobe`, `syscall-shortrealtobits`, `syscall-randomize-with`, `syscall-random`, `syscall-monitor`, `syscall-isunbounded`, `syscall-generate`, `syscall-fread`, `syscall-feof`, `syscall-ungetc`, `syscall-save-restart-warning`.
- Cleaned stale TODO/Bug headers in those 11 tests and converted them to regression-intent comments to reflect current behavior.
- Next implementation target (P0.1): ImportVerilog sampled-value control semantics in `AssertionExpr.cpp` with TDD + xrun parity check.
- Continued scoped execution:
  - Removed stale XFAIL/FIXME from `test/Conversion/MooreToCore/interface-timing-after-inlining.sv` after validating current pass behavior.
  - Verification command: `build_clang_test/bin/circt-verilog --ir-hw test/Conversion/MooreToCore/interface-timing-after-inlining.sv | build_clang_test/bin/FileCheck ...` (PASS).
- Added scoped status board `docs/PROJECT_GAPS_SCOPED_EXECUTION_BOARD.md` tracking completed vs active clusters.
- Ran explicit xrun parity check for sampled `$past` with covergroup handle (`sva-immediate-past-event-continue-on-unsupported.sv`):
  - Xcelium rejects this form (`DYNPRV` unsupported sampled-value argument kind).
  - CIRCT strict mode rejects as well.
  - Marked as expected parity behavior, not immediate implementation target.
- Began parity-driven target selection for next ImportVerilog implementation slice.
- Ran quick automated differential over ImportVerilog unsupported/diagnostic-heavy tests (31 files sampled):
  - Did not find `xrun accepts / CIRCT rejects` cases in this sample.
  - Found several `xrun rejects / CIRCT accepts` cases (`builtins.sv`, `constraint-implication.sv`, `procedures.sv`, `sva-sequence-match-item-stacktrace-function.sv`, `system-calls-complete.sv`) that need triage for legality-vs-tooling differences before treating as gaps.
- SVA gap closure (ImportVerilog + MooreToCore): added covergroup-handle support for sampled `$past` under sampled-value controls and fixed handle-bool crash during MooreToCore lowering.
- TDD flow:
  - Added `test/Conversion/ImportVerilog/sva-past-covergroup-sampled-controls.sv` to lock in successful lowering for covergroup-handle `$past(..., clocking)` equality/inequality forms.
  - Added `test/Conversion/MooreToCore/covergroup-handle-cmp.mlir` for new `moore.covergroup_handle_cmp` lowering.
  - Added `test/Conversion/MooreToCore/bool-cast-handle-pointer.mlir` for pointer-handle `moore.bool_cast` lowering to `llvm.icmp ne %ptr, null`.
- Implementation:
  - `include/circt/Dialect/Moore/MooreOps.td`: introduced `CovergroupHandleCmpPredicateAttr` and `CovergroupHandleCmpOp`.
  - `lib/Conversion/ImportVerilog/Expressions.cpp`: lowered covergroup-handle `==`/`!=` to `moore.covergroup_handle_cmp`.
  - `lib/Conversion/ImportVerilog/AssertionExpr.cpp`: extended sampled-value direct-storage set in `lowerPastWithSamplingControl` to include `moore::CovergroupHandleType`.
  - `lib/Conversion/MooreToCore/MooreToCore.cpp`: added `CovergroupHandleCmpOp` conversion pattern + manual conversion path handling; fixed `BoolCastOpConversion` to branch on input pointer type (not result type) and lower pointer truthiness via null-compare.
- Continue-on-unsupported test maintenance:
  - Updated unsupported sentinels to `$stable(cg)` in strict/warn/IR tests:
    - `test/Conversion/ImportVerilog/sva-continue-on-unsupported.sv`
    - `test/Conversion/ImportVerilog/sva-immediate-past-event-continue-on-unsupported.sv`
  - Realization: property context and immediate expression context emit different warn text today (`unsupported sampled value type for $stable` vs `$stable has unsupported sampled value type ... returning 0`), so expectations were made mode-specific.
- Validation (manual RUN pipelines, since `llvm-lit` multiprocessing semaphores are blocked in this sandbox):
  - Positive regressions pass: event/class/vif/covergroup sampled `$past` tests.
  - Updated strict/warn/IR continue-on-unsupported tests pass.
  - `past-clocking.sv` still passes.
  - New MooreToCore regressions pass: `bool-cast-handle-pointer.mlir`, `covergroup-handle-cmp.mlir`.
- MooreToCore TODO/XFAIL cleanup with root-cause validation:
  - `test/Conversion/MooreToCore/array-locator-func-call-test.sv` was XFAIL due test construction, not conversion failure.
  - Root cause: no top module instantiated/called the class method, so `m_update_lists` body was not emitted, causing MOORE checks to fail; default UVM auto-include also added unrelated noise.
  - Fix:
    - Added `--no-uvm-auto-include` to RUN lines.
    - Added a small `top` module that constructs `uvm_sequencer_base` and calls `m_update_lists()`.
    - Removed stale `XFAIL` marker and updated header comment to regression intent.
  - Validation:
    - `circt-verilog --no-uvm-auto-include --ir-moore ... | FileCheck --check-prefix=MOORE` PASS.
    - `circt-verilog --no-uvm-auto-include ... | FileCheck` PASS.
- ImportVerilog parity slice (xrun-validated): local covergroup variables with implicit sampling events.
  - Discovery: automated scan of `test/Conversion/ImportVerilog/*` tests with `not circt-verilog` found two `xrun accepts / CIRCT rejects` mismatches:
    - `coverage-event-local-assign-new-error.sv`
    - `coverage-event-local-decl-new-error.sv`
  - Root cause: ImportVerilog rejected implicit sampling synthesis for non-module-scope covergroup variables (`var = new;` and `cg var = new;`) via a local-scope guard.
  - Fix:
    - `lib/Conversion/ImportVerilog/Statements.cpp`: added targeted support for covergroup locals in `initial` blocks by hoisting the handle variable to module scope and preserving declaration-time assignment semantics via procedural blocking assignment; added synthesized implicit sampling procedure emission for declaration-time `new`.
    - `lib/Conversion/ImportVerilog/Expressions.cpp`: relaxed assignment-path module discovery to walk parent scopes up to `InstanceBodySymbol`, enabling local-initial hoisted variables to synthesize implicit sampling on `cov = new`.
    - Converted tests to positive semantic regressions:
      - `test/Conversion/ImportVerilog/coverage-event-local-assign-new-error.sv`
      - `test/Conversion/ImportVerilog/coverage-event-local-decl-new-error.sv`
      They now check for: module-visible covergroup handle storage, runtime covergroup instantiation assignment, and synthesized `always` sampling (`wait_event` + `covergroup.sample`).
  - Guardrail kept: function/task-local covergroup instantiation remains unsupported (parity with xrun).
    - `test/Conversion/ImportVerilog/coverage-event-func-static-local-decl-new-error.sv` remains expected-error.
  - Validation:
    - CIRCT checks:
      - `build_clang_test/bin/circt-verilog --no-uvm-auto-include --ir-moore test/Conversion/ImportVerilog/coverage-event-local-assign-new-error.sv | build_clang_test/bin/FileCheck ...` PASS
      - `build_clang_test/bin/circt-verilog --no-uvm-auto-include --ir-moore test/Conversion/ImportVerilog/coverage-event-local-decl-new-error.sv | build_clang_test/bin/FileCheck ...` PASS
      - `build_clang_test/bin/circt-verilog --no-uvm-auto-include --ir-llhd test/Conversion/ImportVerilog/coverage-event-func-static-local-decl-new-error.sv -o /dev/null` FAIL as expected with existing diagnostic.
    - xrun parity checks:
      - PASS: `coverage-event-local-assign-new-error.sv`
      - PASS: `coverage-event-local-decl-new-error.sv`
